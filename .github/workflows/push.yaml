# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"

  Go-Test:  # jobs名稱 (用於測試)
    runs-on: ubuntu-latest  # 指定運行這個job的運行環境
    steps:  # 定義了一系列步驟，每個步驟執行一個特定的操作
      - name: Get project resource # 下載你的repo
        uses: actions/checkout@v3
        with:
          fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis

      - name: Setup Go  # 設置Go環境
        uses: actions/setup-go@v4
        with:
          go-version: '1.21' # 指定使用Go版本為1.21

      - name: test
        run: ls -la
        
      - name: Run golangci-lint # 運行golangci-lint工具來進行Go代碼的靜態檢查
        uses: golangci/golangci-lint-action@v3
        # golangci-lint didn't merge below PR yet
        with: 
          version: v1.53
          args: --timeout 3m --verbose
        #   output-file: golangci-lint.out
